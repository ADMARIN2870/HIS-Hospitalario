
extends ../layout

block content
  h2 Lista de Evaluaciones Médicas

  div(style="display: flex; gap: 10px; margin-bottom: 15px;")
    button.btn(style="margin-right: 10px;") Editar
    button.btn(style="margin-right: 10px;") Eliminar

  form#eliminarForm(action="/controlmedico/eliminar-multiple", method="POST")
    table
      thead
        tr
          th
            input(type="checkbox", onclick="toggleAll(this)")
          th ID Evaluación
          th Internación
          th Paciente
          th Médico
          th Fecha
          th Diagnóstico
          th Tratamiento
          th Evolución
      tbody
        each eval in evaluaciones
          tr
            td
              input(type="checkbox", name="seleccionados", value=eval.id_evaluacion)
            td= eval.id_evaluacion
            td= eval.id_internacion
            td= eval.nombre + ' ' + eval.apellido
            td= eval.medico
            td(style="white-space: nowrap; min-width: 100px")= eval.fecha ? new Date(eval.fecha).toLocaleDateString('es-AR', { day: '2-digit', month: '2-digit', year: 'numeric' }) : '-'
            td= eval.diagnostico
            td= eval.tratamiento
            td= eval.evolucion

  script.
    function toggleAll(source) {
      const checkboxes = document.getElementsByName('seleccionados');
      for (let i = 0; i < checkboxes.length; i++) {
        checkboxes[i].checked = source.checked;
      }
    }
